{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rams\\\\Documents\\\\Web\\\\Spotify\\\\cliente\\\\src\\\\components\\\\Player\\\\audiocomponent.js\";\nimport React, { Fragment } from 'react';\nimport PlayerControls from './buttons_player/playercontrols';\n\nclass ComponentAudio extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playStatus: 'false',\n      audioControls: {\n        songPercent: 0,\n        songTime: '0:00',\n        songDuration: '0:00'\n      },\n      currentTime: 0,\n      duration: 0\n    };\n    this.reactAudioPlayer = React.createRef();\n    this.togglePlay = this.togglePlay.bind(this);\n    this.onTimeUpdateListener = this.onTimeUpdateListener.bind(this);\n    this.updateAudioTime = this.updateAudioTime.bind(this);\n  }\n\n  minTwoDigits(num) {\n    return (num < 10 ? '0' : '') + num;\n  }\n\n  onTimeUpdateListener() {\n    let currentDuration = this.reactAudioPlayer.current.duration;\n    let currentTime = this.reactAudioPlayer.current.currentTime;\n    let percent = currentTime / currentDuration * 100;\n    let audioControls = Object.assign({}, this.state.audioControls);\n\n    if (isNaN(percent)) {\n      audioControls.songPercent = 0;\n    } else {\n      audioControls.songPercent = percent;\n      audioControls.songTime = Math.floor(currentTime.toFixed(0) / 60) + ':' + (currentTime.toFixed(0) % 60 ? this.minTwoDigits(currentTime.toFixed(0) % 60) : '00');\n      audioControls.songDuration = Math.floor(currentDuration.toFixed(0) / 60) + ':' + (currentDuration.toFixed(0) % 60 ? this.minTwoDigits(currentDuration.toFixed(0) % 60) : '00');\n      this.setState({\n        audioControls,\n        currentTime: currentTime,\n        duration: currentDuration\n      });\n    }\n  }\n\n  updateAudioTime(e) {\n    e.persist();\n\n    if (this.state.playStatus !== false) {\n      let songPercentage = e.nativeEvent.layerX / e.target.value;\n      let currentTimeChanged = songPercentage * this.reactAudioPlayer.current.duration;\n      this.reactAudioPlayer.current.currentTime = currentTimeChanged;\n      let audioControls = Object.assign({}, this.state.audioControls);\n      audioControls.songPercent = songPercentage;\n      this.setState({\n        audioControls\n      });\n    }\n  }\n\n  togglePlay() {\n    let status = this.state.playStatus;\n\n    if (status === 'false') {\n      setTimeout(() => {\n        this.reactAudioPlayer.current.play();\n      }, 0);\n      status = 'true';\n    } else {\n      this.reactAudioPlayer.current.pause();\n      status = 'false';\n    }\n\n    this.setState({\n      playStatus: status\n    });\n  }\n\n  render() {\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"audio\", {\n      id: \"audio\",\n      ref: this.reactAudioPlayer,\n      src: this.props.source,\n      onTimeUpdate: this.onTimeUpdateListener,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(PlayerControls, {\n      percent: this.state.audioControls.songPercent,\n      onClick: this.togglePlay,\n      songTime: this.state.audioControls.songTime,\n      songDuration: this.state.audioControls.songDuration,\n      updateAudioTime: this.updateAudioTime,\n      songCurrentTime: this.state.currentTime,\n      songCurrentDuration: this.state.duration,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default ComponentAudio;","map":{"version":3,"sources":["C:\\Users\\Rams\\Documents\\Web\\Spotify\\cliente\\src\\components\\Player\\audiocomponent.js"],"names":["React","Fragment","PlayerControls","ComponentAudio","Component","constructor","props","state","playStatus","audioControls","songPercent","songTime","songDuration","currentTime","duration","reactAudioPlayer","createRef","togglePlay","bind","onTimeUpdateListener","updateAudioTime","minTwoDigits","num","currentDuration","current","percent","Object","assign","isNaN","Math","floor","toFixed","setState","e","persist","songPercentage","nativeEvent","layerX","target","value","currentTimeChanged","status","setTimeout","play","pause","render","source"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react';\r\nimport PlayerControls from './buttons_player/playercontrols';\r\n\r\nclass ComponentAudio extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            playStatus: 'false',\r\n            audioControls: {\r\n                songPercent: 0,\r\n                songTime: '0:00',\r\n                songDuration: '0:00'\r\n            },\r\n            currentTime: 0,\r\n            duration:0\r\n        }\r\n        this.reactAudioPlayer = React.createRef();\r\n        this.togglePlay = this.togglePlay.bind(this);\r\n        this.onTimeUpdateListener = this.onTimeUpdateListener.bind(this);\r\n        this.updateAudioTime = this.updateAudioTime.bind(this);\r\n    }\r\n\r\n    minTwoDigits (num) {\r\n        return ( num < 10 ? '0' : '') + num;\r\n    }\r\n    onTimeUpdateListener () {\r\n        let currentDuration = this.reactAudioPlayer.current.duration;\r\n        let currentTime = this.reactAudioPlayer.current.currentTime;\r\n        let percent = (currentTime / currentDuration) * 100;\r\n        \r\n        let audioControls = Object.assign({}, this.state.audioControls);\r\n        if (isNaN(percent)){\r\n            audioControls.songPercent = 0;\r\n        } else {\r\n            audioControls.songPercent = percent;\r\n            audioControls.songTime = Math.floor(currentTime.toFixed(0) / 60) + ':' + (currentTime.toFixed(0) % 60 ? this.minTwoDigits((currentTime.toFixed(0) % 60)) : '00')\r\n            audioControls.songDuration = Math.floor(currentDuration.toFixed(0) / 60) + ':' + (currentDuration.toFixed(0) % 60 ? this.minTwoDigits(currentDuration.toFixed(0) % 60) : '00');\r\n            this.setState({ \r\n                audioControls,\r\n                currentTime: currentTime,\r\n                duration: currentDuration\r\n            });\r\n        }\r\n    }\r\n\r\n    updateAudioTime (e) {\r\n        e.persist();\r\n        if(this.state.playStatus !== false ) {\r\n            let songPercentage = e.nativeEvent.layerX / e.target.value;\r\n            let currentTimeChanged = songPercentage * this.reactAudioPlayer.current.duration;\r\n            this.reactAudioPlayer.current.currentTime = currentTimeChanged;\r\n            let audioControls = Object.assign({}, this.state.audioControls);\r\n            audioControls.songPercent = songPercentage;\r\n            this.setState({ \r\n                audioControls\r\n             });\r\n        }\r\n    }\r\n    \r\n    togglePlay () {\r\n        let status = this.state.playStatus;\r\n        if ( status === 'false') {\r\n            setTimeout(() => {\r\n                this.reactAudioPlayer.current.play();\r\n            }, 0)\r\n            status = 'true'\r\n        } else {\r\n            this.reactAudioPlayer.current.pause();\r\n            status = 'false';\r\n        }\r\n\r\n        this.setState({\r\n            playStatus: status\r\n        })\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <Fragment>\r\n                <audio id='audio' \r\n                ref={this.reactAudioPlayer} \r\n                src={this.props.source} \r\n                onTimeUpdate={this.onTimeUpdateListener}></audio>\r\n                <PlayerControls \r\n                percent={this.state.audioControls.songPercent} \r\n                onClick={this.togglePlay} \r\n                songTime={this.state.audioControls.songTime} \r\n                songDuration={this.state.audioControls.songDuration}\r\n                updateAudioTime={this.updateAudioTime}\r\n                songCurrentTime={this.state.currentTime}\r\n                songCurrentDuration={this.state.duration}/>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default ComponentAudio;"]},"metadata":{},"sourceType":"module"}