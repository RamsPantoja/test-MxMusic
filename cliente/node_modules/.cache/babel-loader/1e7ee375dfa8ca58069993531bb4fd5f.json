{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rams\\\\Documents\\\\Web\\\\Spotify\\\\cliente\\\\src\\\\components\\\\Player\\\\audiocomponent.js\";\nimport React, { Fragment } from 'react';\nimport PlayerControls from './buttons_player/playercontrols';\n\nclass ComponentAudio extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playStatus: 'false',\n      audioControls: {\n        songPercent: 0,\n        songTime: '0:00',\n        songDuration: '0:00'\n      }\n    };\n    this.reactAudioPlayer = React.createRef();\n    this.togglePlay = this.togglePlay.bind(this);\n    this.onTimeUpdateListener = this.onTimeUpdateListener.bind(this);\n    this.updateAudioTime = this.updateAudioTime.bind(this);\n  }\n\n  minTwoDigits(num) {\n    return (num < 10 ? '0' : '') + num;\n  }\n\n  onTimeUpdateListener() {\n    let currentDuration = this.reactAudioPlayer.current.duration;\n    let currentTime = this.reactAudioPlayer.current.currentTime;\n    let percent = currentTime / currentDuration * 100;\n    let audioControls = Object.assign({}, this.state.audioControls);\n\n    if (isNaN(percent)) {\n      audioControls.songPercent = 0;\n    } else {\n      audioControls.songPercent = percent;\n      audioControls.songTime = Math.floor(currentTime.toFixed(0) / 60) + ':' + (currentTime.toFixed(0) % 60 ? this.minTwoDigits(currentTime.toFixed(0) % 60) : '00');\n      audioControls.songDuration = Math.floor(currentDuration.toFixed(0) / 60) + ':' + (currentDuration.toFixed(0) % 60 ? this.minTwoDigits(currentDuration.toFixed(0) % 60) : '00');\n      this.setState({\n        audioControls\n      });\n    }\n  }\n\n  updateAudioTime(e) {\n    e.persist();\n\n    if (this.state.playStatus !== false) {\n      let songPercentage = e.nativeEvent.layerX / e.target.clientWidth;\n      console.log(songPercentage);\n      let currentTimeChanged = songPercentage * this.reactAudioPlayer.current.duration;\n      console.log(currentTimeChanged);\n      this.reactAudioPlayer.current.currentTime = currentTimeChanged;\n      let audioControls = Object.assign({}, this.state.audioControls);\n      audioControls.songPercent = songPercentage;\n      this.setState({\n        audioControls\n      });\n    }\n  }\n\n  togglePlay() {\n    let status = this.state.playStatus;\n\n    if (status === 'false') {\n      setTimeout(() => {\n        this.reactAudioPlayer.current.play();\n      }, 0);\n      status = 'true';\n    } else {\n      this.reactAudioPlayer.current.pause();\n      status = 'false';\n    }\n\n    this.setState({\n      playStatus: status\n    });\n  }\n\n  render() {\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"audio\", {\n      id: \"audio\",\n      ref: this.reactAudioPlayer,\n      src: this.props.source,\n      onTimeUpdate: this.onTimeUpdateListener,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(PlayerControls, {\n      percent: this.state.audioControls.songPercent,\n      onClick: this.togglePlay,\n      songTime: this.state.audioControls.songTime,\n      songDuration: this.state.audioControls.songDuration,\n      updateAudioTime: this.updateAudioTime,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default ComponentAudio;","map":{"version":3,"sources":["C:\\Users\\Rams\\Documents\\Web\\Spotify\\cliente\\src\\components\\Player\\audiocomponent.js"],"names":["React","Fragment","PlayerControls","ComponentAudio","Component","constructor","props","state","playStatus","audioControls","songPercent","songTime","songDuration","reactAudioPlayer","createRef","togglePlay","bind","onTimeUpdateListener","updateAudioTime","minTwoDigits","num","currentDuration","current","duration","currentTime","percent","Object","assign","isNaN","Math","floor","toFixed","setState","e","persist","songPercentage","nativeEvent","layerX","target","clientWidth","console","log","currentTimeChanged","status","setTimeout","play","pause","render","source"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react';\r\nimport PlayerControls from './buttons_player/playercontrols';\r\n\r\nclass ComponentAudio extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            playStatus: 'false',\r\n            audioControls: {\r\n                songPercent: 0,\r\n                songTime: '0:00',\r\n                songDuration: '0:00'\r\n            }\r\n        }\r\n        this.reactAudioPlayer = React.createRef();\r\n        this.togglePlay = this.togglePlay.bind(this);\r\n        this.onTimeUpdateListener = this.onTimeUpdateListener.bind(this);\r\n        this.updateAudioTime = this.updateAudioTime.bind(this);\r\n    }\r\n\r\n    minTwoDigits (num) {\r\n        return ( num < 10 ? '0' : '') + num;\r\n    }\r\n    onTimeUpdateListener () {\r\n        let currentDuration = this.reactAudioPlayer.current.duration;\r\n        let currentTime = this.reactAudioPlayer.current.currentTime;\r\n        let percent = (currentTime / currentDuration) * 100;\r\n        \r\n        let audioControls = Object.assign({}, this.state.audioControls);\r\n        if (isNaN(percent)){\r\n            audioControls.songPercent = 0;\r\n        } else {\r\n            audioControls.songPercent = percent;\r\n            audioControls.songTime = Math.floor(currentTime.toFixed(0) / 60) + ':' + (currentTime.toFixed(0) % 60 ? this.minTwoDigits((currentTime.toFixed(0) % 60)) : '00')\r\n            audioControls.songDuration = Math.floor(currentDuration.toFixed(0) / 60) + ':' + (currentDuration.toFixed(0) % 60 ? this.minTwoDigits(currentDuration.toFixed(0) % 60) : '00');\r\n            this.setState({ \r\n                audioControls\r\n            });\r\n        }\r\n    }\r\n\r\n    updateAudioTime (e) {\r\n        e.persist();\r\n        if(this.state.playStatus !== false ) {\r\n            let songPercentage = e.nativeEvent.layerX / e.target.clientWidth;\r\n            console.log(songPercentage)\r\n            let currentTimeChanged = songPercentage * this.reactAudioPlayer.current.duration;\r\n            console.log(currentTimeChanged)\r\n            this.reactAudioPlayer.current.currentTime = currentTimeChanged;\r\n            let audioControls = Object.assign({}, this.state.audioControls);\r\n            audioControls.songPercent = songPercentage;\r\n            this.setState({ \r\n                audioControls\r\n             });\r\n        }\r\n    }\r\n    \r\n    togglePlay () {\r\n        let status = this.state.playStatus;\r\n        if ( status === 'false') {\r\n            setTimeout(() => {\r\n                this.reactAudioPlayer.current.play();\r\n            }, 0)\r\n            status = 'true'\r\n        } else {\r\n            this.reactAudioPlayer.current.pause();\r\n            status = 'false';\r\n        }\r\n\r\n        this.setState({\r\n            playStatus: status\r\n        })\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <Fragment>\r\n                <audio id='audio' \r\n                ref={this.reactAudioPlayer} \r\n                src={this.props.source} \r\n                onTimeUpdate={this.onTimeUpdateListener}></audio>\r\n                <PlayerControls \r\n                percent={this.state.audioControls.songPercent} \r\n                onClick={this.togglePlay} \r\n                songTime={this.state.audioControls.songTime} \r\n                songDuration={this.state.audioControls.songDuration}\r\n                updateAudioTime={this.updateAudioTime}/>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default ComponentAudio;"]},"metadata":{},"sourceType":"module"}